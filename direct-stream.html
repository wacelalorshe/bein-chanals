<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุดุบูู ูุจุงุดุฑ - ูุณูู ูุงูู ุจุฑู</title>
    <style>
        body { margin: 0; padding: 20px; background: #000; color: white; font-family: Arial; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { color: #654FD4; text-align: center; }
        .player { width: 100%; background: #000; margin: 20px 0; }
        video { width: 100%; height: auto; max-height: 70vh; }
        .controls { text-align: center; margin: 20px 0; }
        button { background: #654FD4; color: white; border: none; padding: 12px 24px; margin: 5px; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #42318F; }
        .info { background: rgba(101, 79, 212, 0.1); padding: 15px; border-radius: 8px; margin: 20px 0; }
        .url { background: #111; padding: 10px; border-radius: 5px; font-family: monospace; word-break: break-all; }
    </style>
</head>
<body>
    <div class="container">
        <h1>๐ด ูุณูู ูุงูู ุจุฑู - ุงูุชุดุบูู ุงููุจุงุดุฑ</h1>
        
        <div class="info">
            <h3>๐ฏ ุชุนูููุงุช ุณุฑูุนุฉ:</h3>
            <p>1. ุงุถุบุท ุนูู ุฒุฑ โถ <strong>ุชุดุบูู ุงูุขู</strong></p>
            <p>2. ุฅุฐุง ูู ูุนููุ ุฌุฑุจ ุฒุฑ ๐ <strong>ูุชุญ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ</strong></p>
            <p>3. ููุชุดุบูู ุจูุงูู ุงูุดุงุดุฉุ ุงุถุบุท ุนูู ุฃููููุฉ ๐บ ูู ุงูููุฏูู</p>
        </div>
        
        <div class="player">
            <video id="videoPlayer" controls autoplay playsinline>
                ุฌุงุฑู ุชุญููู ุงูุจุซ...
            </video>
        </div>
        
        <div class="controls">
            <button onclick="playStream()">โถ ุชุดุบูู ุงูุขู</button>
            <button onclick="openStream()">๐ ูุชุญ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ</button>
            <button onclick="fullscreen()">๐บ ููุก ุงูุดุงุดุฉ</button>
            <button onclick="window.close()">โ ุฅุบูุงู</button>
        </div>
        
        <div class="info">
            <h3>๐ก ุฑุงุจุท ุงูุจุซ:</h3>
            <div class="url" id="streamUrl"></div>
            <p style="margin-top: 10px; color: #888;">
                ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ููุตู ุจู:<br>
                1. ุงุณุชุฎุฏุงู ุชุทุจูู <strong>XPola Player</strong><br>
                2. ุฃู ุชูุฒูู <strong>VLC Media Player</strong>
            </p>
        </div>
    </div>

    <script>
        // ุงูุญุตูู ุนูู ุฑุงุจุท ุงูุจุซ ูู URL
        const urlParams = new URLSearchParams(window.location.search);
        const streamUrl = urlParams.get('stream');
        
        // ุนุฑุถ ุฑุงุจุท ุงูุจุซ
        document.getElementById('streamUrl').textContent = streamUrl || 'ูู ูุชู ุชุญุฏูุฏ ุฑุงุจุท';
        
        const video = document.getElementById('videoPlayer');
        
        // ุฏุงูุฉ ุงูุชุดุบูู ุงูุฑุฆูุณูุฉ
        function playStream() {
            if (!streamUrl) {
                alert('ูุง ููุฌุฏ ุฑุงุจุท ุจุซ');
                return;
            }
            
            console.log('๐ฌ ูุญุงููุฉ ุชุดุบูู:', streamUrl);
            
            // ุทุฑููุฉ 1: ุงุณุชุฎุฏุงู src ูุจุงุดุฑุฉ
            video.src = streamUrl;
            video.type = 'application/x-mpegURL';
            
            // ูุญุงููุฉ ุงูุชุดุบูู
            video.play().then(() => {
                console.log('โ ุจุฏุฃ ุงูุชุดุบูู ุจูุฌุงุญ');
            }).catch(error => {
                console.log('โ๏ธ ูุดู ุงูุชุดุบูู ุงูุชููุงุฆู:', error);
                
                // ุทุฑููุฉ 2: ุงุณุชุฎุฏุงู blob
                tryAlternativeMethod();
            });
        }
        
        function tryAlternativeMethod() {
            console.log('๐ ุชุฌุฑุจุฉ ุทุฑููุฉ ุจุฏููุฉ');
            
            // ูุญุงููุฉ fetch ูุน no-cors
            fetch(streamUrl, {
                mode: 'no-cors',
                headers: {
                    'Accept': '*/*',
                    'User-Agent': 'Mozilla/5.0'
                }
            }).then(() => {
                // ุฅุฐุง ูุตููุง ููุงุ ุงูุฑุงุจุท ูุนูู
                video.src = streamUrl;
                video.load();
                
                alert('ุชู ุชุญููู ุงูุจุซ. ุงุถุบุท ุนูู ุฒุฑ ุงูุชุดุบูู ูู ุงูููุฏูู.');
            }).catch(() => {
                // ูุดู ุฌููุน ุงููุญุงููุงุช
                alert('ุชุนุฐุฑ ุงููุตูู ููุจุซ ูุจุงุดุฑุฉ. ุฌุฑุจ "ูุชุญ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ".');
            });
        }
        
        function openStream() {
            if (!streamUrl) {
                alert('ูุง ููุฌุฏ ุฑุงุจุท ุจุซ');
                return;
            }
            
            // ูุชุญ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ ุฌุฏุงู ุจุณูุทุฉ
            const newWindow = window.open('', '_blank');
            newWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head><title>ุงูุจุซ ุงููุจุงุดุฑ</title></head>
                <body style="margin:0;background:#000;">
                    <video controls autoplay style="width:100vw;height:100vh;">
                        <source src="${streamUrl}" type="application/x-mpegURL">
                    </video>
                    <script>
                        document.querySelector('video').play().catch(e => console.log(e));
                    <\/script>
                </body>
                </html>
            `);
            newWindow.document.close();
        }
        
        function fullscreen() {
            if (video.requestFullscreen) {
                video.requestFullscreen();
            } else if (video.webkitRequestFullscreen) {
                video.webkitRequestFullscreen();
            } else if (video.msRequestFullscreen) {
                video.msRequestFullscreen();
            }
        }
        
        // ุงูุชุดุบูู ุงูุชููุงุฆู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('load', function() {
            setTimeout(playStream, 1000);
        });
    </script>
</body>
</html>